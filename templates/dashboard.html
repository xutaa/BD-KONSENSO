{% extends 'base.html' %}

{% block title %}Dashboard | Konsenso{% endblock %}
{% block header_title %}Painel de Controle{% endblock %}

{% block content %}
<div class="card mb-4" style="border-left: 5px solid var(--secondary-color);">
    <div class="card-header border-0 pb-0">
        <h3 class="card-title"><i class="fa-solid fa-list-check"></i> Estado do Projeto</h3>
    </div>
    <div class="card-body pt-3">
        <ul class="status-list">
            {% for fase, status in roadmap.items() %}
            <li>
                <span class="text-muted">{{ fase }}</span>
                <span class="fw-bold {% if 'Concluída' in status %}text-success{% else %}text-warning{% endif %}">
                    {{ status }}
                </span>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

{% if permissoes.gestao_principal %}
<h3 class="section-title text-muted text-uppercase fs-6 fw-bold mt-5 mb-3">Gestão Comercial</h3>
<div class="grid">
    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_produtos') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-box"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Produtos</h3>
            <p class="text-muted small m-0">Catálogo e Preços</p>
        </a>
    </div>

    {% if tipo_admin != 'Fabrica' %}
    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_vendas') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-cart-shopping"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Vendas</h3>
            <p class="text-muted small m-0">Registo e Histórico</p>
        </a>
    </div>
    {% endif %}

    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_stock') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-boxes-stacked"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Stock</h3>
            <p class="text-muted small m-0">Inventário</p>
        </a>
    </div>

    {% if tipo_admin != 'Fabrica' %}
    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_itens') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-receipt"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Itens Vendidos</h3>
            <p class="text-muted small m-0">Detalhe de Faturas</p>
        </a>
    </div>
    {% endif %}
</div>
{% endif %}

{% if permissoes.pessoas_clientes %}
<h3 class="section-title text-muted text-uppercase fs-6 fw-bold mt-5 mb-3">Pessoas & Entidades</h3>
<div class="grid">
    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_clientes') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-users"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Clientes</h3>
            <p class="text-muted small m-0">Gestão de Clientes</p>
        </a>
    </div>

    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_vendedores') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-briefcase"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Vendedores</h3>
            <p class="text-muted small m-0">Equipa Comercial</p>
        </a>
    </div>

    {% if tipo_admin == 'Geral' %}
    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_funcionarios') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-user-tie"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Funcionários</h3>
            <p class="text-muted small m-0">Recursos Humanos</p>
        </a>
    </div>

    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_cargos') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-id-badge"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Cargos</h3>
            <p class="text-muted small m-0">Definição de Funções</p>
        </a>
    </div>

    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_contratos_vendedor') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-file-contract"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Contratos</h3>
            <p class="text-muted small m-0">Vínculos Laborais</p>
        </a>
    </div>
    {% endif %}
</div>
{% endif %}

<!-- Empresas e Logística -->
{% if permissoes.empresas or permissoes.infraestrutura %}
<h3 class="section-title text-muted text-uppercase fs-6 fw-bold mt-5 mb-3">Infraestrutura & Parceiros</h3>
<div class="grid">
    {% if tipo_admin == 'Geral' %}
    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_empresas') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-building"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Empresas</h3>
            <p class="text-muted small m-0">Parceiros B2B</p>
        </a>
    </div>
    {% endif %}

    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_fornecedores') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-truck-field"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Fornecedores</h3>
            <p class="text-muted small m-0">Abastecimento</p>
        </a>
    </div>

    {% if tipo_admin == 'Geral' %}
    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_distribuidoras') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-truck"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Distribuidoras</h3>
            <p class="text-muted small m-0">Logística Externa</p>
        </a>
    </div>
    {% endif %}

    <div class="card p-0 hover-shadow">
        <a href="{{ url_for('lista_armazens') }}" class="card-link p-4">
            <div class="card-icon"><i class="fa-solid fa-warehouse"></i></div>
            <h3 class="fs-5 fw-bold mb-1">Armazéns</h3>
            <p class="text-muted small m-0">Gestão de Espaços</p>
        </a>
    </div>
</div>
{% endif %}
{% endblock %}